<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>16åŠ¨ç‰©æ€§æ ¼å°æµ‹è¯•</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Helvetica Neue", Arial;
      background:
        radial-gradient(circle at top, rgba(255, 143, 184, 0.28), transparent 55%),
        radial-gradient(circle at bottom, rgba(255, 187, 216, 0.18), #06050a);
      color: #f5f5f7;
      min-height: 100vh;
    }

    .app {
      width: 100%;
      max-width: 720px;
      margin: 0 auto;
      min-height: 100vh;
    }

    /* å°é¢ï¼šæ•´å± */

    .card-start {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      padding: 28px 18px 22px;
    }

    .start-main {
      padding-top: 10px;
    }

    .title-main {
      font-size: 26px;
      font-weight: 700;
      margin-bottom: 8px;
      color: #ffffff;
    }

    .title-sub {
      font-size: 13px;
      color: #d0cfe4;
      margin-bottom: 16px;
      line-height: 1.6;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 20px;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      font-size: 11px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.16);
      background: rgba(10, 8, 16, 0.45);
      color: #f5d7ec;
    }

    .pill span { margin-right: 4px; }

    button {
      border: none;
      padding: 12px 14px;
      border-radius: 999px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      background: linear-gradient(135deg, #ff4b8a, #ff9ccc);
      color: #ffffff;
      width: 100%;
      box-shadow: 0 12px 30px rgba(255, 75, 138, 0.5);
      transition: transform 0.12s ease, box-shadow 0.12s ease, opacity 0.12s;
    }

    button:active {
      transform: translateY(1px);
      box-shadow: 0 7px 18px rgba(255, 75, 138, 0.4);
      opacity: 0.96;
    }

    .btn-secondary {
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(255, 255, 255, 0.18);
      color: #f0f0ff;
      box-shadow: none;
    }
    .btn-secondary:active {
      box-shadow: none;
    }

    .btn-row {
      display: flex;
      gap: 10px;
      margin-top: 18px;
    }
    .btn-row button {
      width: 50%;
    }

    .start-bottom {
      margin-top: auto;
      padding-bottom: 8px;
    }

    .tip {
      font-size: 11px;
      color: #9b9db5;
      margin-top: 10px;
      text-align: center;
      line-height: 1.4;
    }

    /* æµ‹è¯•é¡µå¡ç‰‡ */

    .card {
      padding: 24px 18px 26px;
    }

    .panel {
      margin-top: 8px;
      padding: 18px 14px 22px;
      background: rgba(9, 9, 16, 0.94);
      border-radius: 22px;
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.6);
    }

    .progress-wrap {
      margin-bottom: 16px;
    }
    .progress-label {
      display: flex;
      justify-content: space-between;
      font-size: 11px;
      color: #a4a7bf;
      margin-bottom: 6px;
    }
    .progress-bar {
      width: 100%;
      height: 6px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.08);
      overflow: hidden;
    }
    .progress-inner {
      height: 100%;
      border-radius: 999px;
      background: linear-gradient(135deg, #ff4b8a, #ff9ccc);
      width: 0%;
      transition: width 0.25s ease;
    }

    .question-title {
      font-size: 17px;
      font-weight: 600;
      margin-bottom: 6px;
      color: #ffffff;
      line-height: 1.6;
    }

    .question-sub {
      font-size: 12px;
      color: #a4a7bf;
      margin-bottom: 10px;
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 4px;
    }

    /* ç™½åº•é€‰é¡¹å¡ç‰‡ */

    .opt {
      font-size: 13px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid #f0e3ff;
      background: #ffffff;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: space-between;
      transition: all 0.16s ease;
      color: #33313d;
    }

    .opt-main {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .opt.selected {
      border-color: #ff8fb8;
      background: #ffe6f3;
      color: #2b1030;
      box-shadow: 0 6px 16px rgba(255, 143, 184, 0.35);
    }

    .btn-row-bottom {
      margin-top: 18px;
      display: flex;
      gap: 10px;
    }
    .btn-row-bottom button {
      width: 50%;
      box-shadow: none;
    }

    /* ç»“æœé¡µ */

    .result-header {
      margin-bottom: 12px;
      padding-bottom: 8px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.12);
    }

    .result-badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(255, 143, 184, 0.2);
      font-size: 11px;
      color: #ffd2ea;
      margin-bottom: 6px;
    }

    .result-animal {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 4px;
      color: #ffffff;
    }

    .result-line {
      font-size: 13px;
      color: #d0cfe4;
    }

    .section-title {
      font-size: 14px;
      font-weight: 600;
      margin: 14px 0 6px;
      color: #ffffff;
    }

    .section-text {
      font-size: 12px;
      color: #c4c7d4;
      line-height: 1.6;
      white-space: pre-line;
    }

    .score-row {
      margin-top: 8px;
    }

    .score-label {
      font-size: 12px;
      display: flex;
      justify-content: space-between;
      margin-bottom: 3px;
      color: #e0e3f2;
    }

    .score-bar {
      width: 100%;
      height: 6px;
      background: rgba(255, 255, 255, 0.08);
      border-radius: 999px;
      overflow: hidden;
    }

    .score-inner {
      height: 100%;
      border-radius: 999px;
      background: linear-gradient(135deg, #ff4b8a, #ff9ccc);
      width: 0%;
      transition: width 0.3s ease;
    }

    .loading {
      font-size: 13px;
      color: #e0e3f2;
      margin-top: 16px;
    }

    .dot {
      display: inline-block;
      width: 4px;
      height: 4px;
      border-radius: 50%;
      background: #ff78b4;
      margin: 0 2px;
      animation: bounce 0.8s infinite alternate;
    }
    .dot:nth-child(2) { animation-delay: 0.15s; }
    .dot:nth-child(3) { animation-delay: 0.3s; }

    @keyframes bounce {
      from { transform: translateY(0); opacity: 0.5; }
      to { transform: translateY(-3px); opacity: 1; }
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- å°é¢ -->
    <div class="card-start" id="startCard">
      <div class="start-main">
        <div class="title-main">16åŠ¨ç‰©æ€§æ ¼å°æµ‹è¯•</div>
        <div class="title-sub">
          ä»æ—¥å¸¸é€‰æ‹©ã€æƒ…ç»ªååº”å’Œç›¸å¤„æ–¹å¼å‡ºå‘ï¼Œçœ‹çœ‹ä½ æ›´åƒå“ªå‡ åªå°åŠ¨ç‰©ã€‚<br>
          æµ‹è¯•åå¨±ä¹å‘ï¼Œä¸åšä»»ä½•ä¸“ä¸šè¯Šæ–­ï¼Œåªæ˜¯å¸®ä½ å¤šä¸€ä¸ªçœ‹è‡ªå·±çš„è§’åº¦ã€‚
        </div>
        <div class="pill-row">
          <div class="pill"><span>â€¢</span> ä¸€é¢˜ä¸€é¡µï¼Œæ²‰æµ¸ä½œç­”</div>
          <div class="pill"><span>â€¢</span> å†…éƒ¨ 16 ç§åŠ¨ç‰©åŸå‹</div>
          <div class="pill"><span>â€¢</span> ç»“æœå¯æˆªå›¾åˆ†äº«</div>
        </div>
      </div>
      <div class="start-bottom">
        <button id="startBtn">å¼€å§‹æµ‹è¯•</button>
        <div class="tip">å°½é‡é€‰æ‹©ã€Œå¹³æ—¶çš„ä½ ã€ï¼Œè€Œä¸æ˜¯ä½ ç†æƒ³ä¸­çš„æ ·å­ã€‚</div>
      </div>
    </div>

    <!-- æµ‹è¯•é¡µ -->
    <div class="card" id="quizCard" style="display:none;">
      <div class="panel">
        <div class="progress-wrap">
          <div class="progress-label">
            <span id="progressText">ç¬¬ 1 é¢˜ / å…± 1 é¢˜</span>
            <span id="progressPercent">0%</span>
          </div>
          <div class="progress-bar">
            <div class="progress-inner" id="progressInner"></div>
          </div>
        </div>

        <div class="question-title" id="questionTitle"></div>
        <div class="question-sub" id="questionSub"></div>
        <div class="options" id="optionsContainer"></div>

        <div class="btn-row-bottom">
          <button class="btn-secondary" id="prevBtn">ä¸Šä¸€é¢˜</button>
          <button id="nextBtn">ä¸‹ä¸€é¢˜</button>
        </div>
      </div>
      <div class="tip">å¦‚æœæœ‰ä¸¤ä¸ªé€‰é¡¹éƒ½å¾ˆåƒä½ ï¼Œå°±é€‰ã€Œæ›´å¸¸å‡ºç°ã€çš„é‚£ä¸ªã€‚</div>
    </div>

    <!-- ç»“æœé¡µ -->
    <div class="card" id="resultCard" style="display:none;">
      <div class="panel">
        <div class="result-header">
          <div class="result-badge">ä½ çš„åŠ¨ç‰©æ€§æ ¼ç»„åˆ</div>
          <div class="result-animal" id="resultAnimal"></div>
          <div class="result-line" id="resultLine"></div>
        </div>

        <div id="scoreContainer"></div>

        <div class="section-title">ä¸»å¯¼åŠ¨ç‰©åŸå‹</div>
        <div class="section-text" id="mainText"></div>

        <div class="section-title">è¾…ä½ / éšè—åŠ¨ç‰©åŸå‹</div>
        <div class="section-text" id="secondText"></div>

        <div class="section-title">ç»™ä½ çš„ä¸€ä¸ªå°æé†’</div>
        <div class="section-text" id="adviceText"></div>

        <button id="restartBtn" style="margin-top:18px;">é‡æ–°æµ‹è¯•ä¸€æ¬¡</button>
      </div>
      <div class="tip">å¯ä»¥æˆªå›¾ä¿å­˜ç»“æœï¼Œå‘åˆ°ç¬”è®°é‡Œæˆ–è€…åˆ†äº«ç»™æœ‹å‹ä¸€èµ·ç©ï½</div>
    </div>

    <!-- åŠ è½½é¡µ -->
    <div class="card" id="loadingCard" style="display:none;">
      <div class="panel">
        <div class="title-main" style="font-size:20px;margin-bottom:6px;">æ­£åœ¨æ•´ç†ä½ çš„åŠ¨ç‰©æ¡£æ¡ˆ</div>
        <div class="title-sub" style="margin-bottom:10px;">
          æ ¹æ®ä½ çš„é€‰æ‹©ï¼Œå¯¹ 16 ç§ä¸åŒåŠ¨ç‰©åŸå‹è¿›è¡Œç®€å•åŠ æƒï¼Œç”Ÿæˆä¸€ä»½å±äºä½ çš„åŠ¨ç‰©æ€§æ ¼æŠ¥å‘Šã€‚
        </div>
        <div class="loading">
          åˆ†æä¸­<span class="dot"></span><span class="dot"></span><span class="dot"></span>
        </div>
        <div class="tip" style="margin-top:14px;">
          æœ¬æµ‹è¯•ä¸ä¼šå­˜å‚¨ä½ çš„ä¸ªäººä¿¡æ¯ï¼Œæ‰€æœ‰è®¡ç®—éƒ½åªåœ¨ä½ å½“å‰è®¾å¤‡æœ¬åœ°å®Œæˆã€‚
        </div>
      </div>
    </div>
  </div>

  <script>
    // 16 ç§åŠ¨ç‰©åŸå‹ï¼šä¸€å®šåŒ…å«çŒ«å’Œé‡‘æ¯›
    const animalDefs = {
      cat:       { key: "cat",       name: "çŒ« Â· æ…¢çƒ­è§‚å¯Ÿå‹",   icon: "ğŸ±", brief: "è¡¨é¢ä½›ç³»ï¼Œå†…å¿ƒç»†è…»æ•æ„Ÿï¼Œä¹ æƒ¯å…ˆè§‚å¯Ÿå†è¡ŒåŠ¨ã€‚", advice: "ä½ çš„æ„Ÿå—å¾ˆé‡è¦ï¼Œé€‚å½“è¯´å‡ºæ¥ï¼Œä¼šæ›´èˆ’æœã€‚" },
      golden:    { key: "golden",    name: "é‡‘æ¯› Â· å¤ªé˜³å‹",     icon: "ğŸ¶", brief: "çƒ­æƒ…çœŸè¯šï¼Œå–œæ¬¢ç»™åˆ«äººå¸¦å»å®‰å…¨æ„Ÿå’Œæ¸©æš–ã€‚", advice: "é€‚å½“æŠŠçƒ­æƒ…ç•™ç»™è‡ªå·±ä¸€ç‚¹ï¼Œä¸ç”¨å¯¹æ‰€æœ‰äººéƒ½é‚£ä¹ˆå¥½ã€‚" },
      fox:       { key: "fox",       name: "ç‹ç‹¸ Â· æœºçµç¤¾äº¤å‹", icon: "ğŸ¦Š", brief: "ä¼šè¯»ç©ºæ°”ï¼Œå–„äºè°ƒèŠ‚æ°›å›´ï¼Œååº”å¾ˆå¿«ã€‚", advice: "å¹½é»˜æ˜¯ç¤¼ç‰©ï¼Œä½†ä¹Ÿè¦ç…§é¡¾è‡ªå·±çš„æƒ…ç»ªåº•çº¿ã€‚" },
      rabbit:    { key: "rabbit",    name: "å…”å­ Â· è½¯èŒå’Œå¹³å‹", icon: "ğŸ°", brief: "è®¨åŒå†²çªï¼Œå–œæ¬¢æ¸©æŸ”ç¨³å®šçš„å…³ç³»å’Œç¯å¢ƒã€‚", advice: "æ¸©æŸ”ä¸æ˜¯è½¯å¼±ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨æŸ”è½¯é‡Œé•¿å‡ºè¾¹ç•Œã€‚" },
      owl:       { key: "owl",       name: "çŒ«å¤´é¹° Â· ç†æ™ºæ€è€ƒå‹", icon: "ğŸ¦‰", brief: "ä¹ æƒ¯å…ˆæƒ³æ¸…æ¥šå†è¡ŒåŠ¨ï¼Œå–œæ¬¢äº†è§£æ¥é¾™å»è„‰ã€‚", advice: "æœ‰æ—¶å…ˆåŠ¨èµ·æ¥ï¼Œå†è¾¹èµ°è¾¹ä¿®ä¹Ÿæ²¡é—®é¢˜ã€‚" },
      wolf:      { key: "wolf",      name: "ç‹¼ Â· å›¢é˜Ÿå®ˆæŠ¤å‹",   icon: "ğŸº", brief: "é‡è§†å›¢é˜Ÿå’Œã€Œè‡ªå·±äººã€ï¼Œæœ‰æ˜ç¡®çš„åŸåˆ™å’Œåº•çº¿ã€‚", advice: "å¯¹è‡ªå·±æŸ”è½¯ä¸€ç‚¹ï¼Œä¸éœ€è¦æ—¶åˆ»éƒ½åœ¨è­¦æˆ’ã€‚" },
      dolphin:   { key: "dolphin",   name: "æµ·è±š Â· å…±æƒ…æ²»æ„ˆå‹", icon: "ğŸ¬", brief: "å…±æƒ…åŠ›å¾ˆå¼ºï¼Œå¾ˆä¼šç…§é¡¾åˆ«äººçš„æƒ…ç»ªã€‚", advice: "ç…§é¡¾åˆ«äººçš„åŒæ—¶ï¼Œä¹Ÿåˆ«å¿˜äº†å®‰é¡¿ä½ è‡ªå·±çš„æ„Ÿå—ã€‚" },
      hedgehog:  { key: "hedgehog",  name: "åˆºçŒ¬ Â· å¤–å†·å†…æš–å‹", icon: "ğŸ¦”", brief: "ä¸€å¼€å§‹ä¼šç«–èµ·åˆºä¿æŠ¤è‡ªå·±ï¼Œç†Ÿäº†ä¹‹åå¾ˆæŸ”è½¯ã€‚", advice: "å°è¯•å‘å¯ä¿¡çš„äººå¸ä¸‹ä¸€ç‚¹ç‚¹é˜²å¤‡ï¼Œä¼šè½»æ¾å¾ˆå¤šã€‚" },
      deer:      { key: "deer",      name: "é¹¿ Â· å®³ç¾ä½“è´´å‹",   icon: "ğŸ¦Œ", brief: "æ•æ„Ÿç»†è…»ã€é¡¾è™‘è¾ƒå¤šï¼Œå®¹æ˜“ç´§å¼ ä½†å¾ˆä½“è´´ã€‚", advice: "ä½ æœ‰èµ„æ ¼å ä¸€ç‚¹ç©ºé—´ï¼Œä¸ç”¨æ€»æ˜¯å¾€åé€€ã€‚" },
      tiger:     { key: "tiger",     name: "è€è™ Â· å†²åŠ²è¡ŒåŠ¨å‹", icon: "ğŸ¯", brief: "æ•¢æƒ³æ•¢å†²ï¼Œè®¨åŒæ‹–æ³¥å¸¦æ°´ï¼Œå–œæ¬¢ç›´æ¥è¡ŒåŠ¨ã€‚", advice: "å†²ä¹‹å‰å¤šç»™è‡ªå·±å‡ ç§’æ€è€ƒï¼Œä¼šæ›´çœåŠ›ã€‚" },
      lion:      { key: "lion",      name: "ç‹®å­ Â· é¢†å¯¼ä¸»å¿ƒéª¨å‹", icon: "ğŸ¦", brief: "è‡ªç„¶ä¼šç«™åˆ°ä¸­é—´åè°ƒå’Œç»„ç»‡ï¼Œç›®æ ‡æ„Ÿå¼ºã€‚", advice: "è®°å¾—è®©åˆ«äººä¹Ÿå‚ä¸å†³ç­–ï¼Œä½ ä¼šæ›´è½»æ¾ã€‚" },
      turtle:    { key: "turtle",    name: "ä¹Œé¾Ÿ Â· ç¨³ç¨³æ…¢çƒ­å‹", icon: "ğŸ¢", brief: "èŠ‚å¥åæ…¢ä½†ç¨³å®šï¼Œä¸å–œæ¬¢è¢«å‚¬ä¿ƒå’Œæ‰“ä¹±è®¡åˆ’ã€‚", advice: "åˆ«äººæœªå¿…ä¼šç­‰ä½ ï¼Œé€‚å½“åŠ ä¸€ç‚¹å¼¹æ€§å¯¹ä½ æ˜¯ä¿æŠ¤ã€‚" },
      butterfly: { key: "butterfly", name: "è´è¶ Â· å˜åŒ–ä½“éªŒå‹", icon: "ğŸ¦‹", brief: "è¢«æ–°é²œæ„Ÿå¸å¼•ï¼Œå–œæ¬¢è½»ç›ˆå’Œå˜åŒ–ã€‚", advice: "ä¿ç•™ä¸€ç‚¹é•¿æœŸç¨³å®šçš„ä¸œè¥¿ï¼Œä¼šè®©ä½ æ›´æœ‰å®‰å…¨æ„Ÿã€‚" },
      beaver:    { key: "beaver",    name: "æ²³ç‹¸ Â· å®å¹²æ‰§è¡Œå‹", icon: "ğŸ¦«", brief: "è„šè¸å®åœ°ï¼Œæ“…é•¿æŠŠäº‹æƒ…ä¸€æ­¥æ­¥è½åœ°ã€‚", advice: "å¶å°”å…è®¸è‡ªå·±ä¸é‚£ä¹ˆé«˜æ•ˆï¼Œä¹Ÿæ˜¯å¦ä¸€ç§å……ç”µã€‚" },
      penguin:   { key: "penguin",   name: "ä¼é¹… Â· é™ªä¼´é»é»å‹", icon: "ğŸ§", brief: "é‡è§†é™ªä¼´å’Œä»ªå¼æ„Ÿï¼Œå–œæ¬¢ç†Ÿæ‚‰çš„äººå’Œå›ºå®šçš„å°åœˆå­ã€‚", advice: "è¯•ç€è¡¨è¾¾ä½ çš„éœ€æ±‚ï¼Œè€Œä¸æ˜¯é—·åœ¨å¿ƒé‡Œã€‚" },
      horse:     { key: "horse",     name: "é©¬ Â· è‡ªç”±æ¢ç´¢å‹",   icon: "ğŸ´", brief: "å–œæ¬¢ç©ºé—´å’Œè‡ªç”±ï¼Œä¸å¤ªçˆ±è¢«è¿‡åº¦æŸç¼šã€‚", advice: "åœ¨è‡ªç”±å’Œæ‰¿è¯ºä¹‹é—´æ‰¾åˆ°å¹³è¡¡ï¼Œä¼šéå¸¸åŠ åˆ†ã€‚" }
    };

    // é¢˜ç›®ï¼ˆå…ˆæ”¾ 8 é¢˜æ ·ä¾‹ï¼Œä½ å¯ä»¥æŒ‰åŒæ ·æ ¼å¼ç»§ç»­å¾€ååŠ ï¼‰
    const questions = [
      {
        title: "åœ¨ä¸€ç¾¤æ–°æœ‹å‹çš„èšä¼šä¸Šï¼Œä½ æ›´å¸¸è§çš„çŠ¶æ€æ˜¯ï¼Ÿ",
        sub: "ä¸ç”¨æƒ³å¤ªä¹…ï¼Œé€‰ä¸€ä¸ªæœ€æ¥è¿‘çœŸå®çŠ¶æ€çš„ä½ ã€‚",
        options: [
          { text: "å…ˆå¸®å¿™çœ‹çœ‹è¦æ€ä¹ˆå®‰æ’ï¼Œé¡ºæ‰‹ç»„ç»‡ä¸€ä¸‹å¤§å®¶ã€‚", animals: ["lion", "tiger", "wolf"] },
          { text: "æ‰¾ä¸ªèˆ’æœçš„ä½ç½®åå¥½ï¼Œå…ˆè§‚å¯Ÿå¤§å®¶çš„æ°”è´¨ã€‚", animals: ["cat", "owl", "deer"] },
          { text: "åˆ°å¤„ä¸²æ¡Œæ‰“æ‹›å‘¼ï¼Œè¯•ç€å’Œä¸åŒçš„äººæ­ä¸Šè¯ã€‚", animals: ["golden", "fox", "butterfly"] },
          { text: "å’Œç†Ÿæ‚‰çš„äººå¾…åœ¨ä¸€èµ·ï¼Œå¶å°”ç¤¼è²Œæ€§å’Œåˆ«äººäº’åŠ¨ã€‚", animals: ["rabbit", "penguin", "hedgehog"] }
        ]
      },
      {
        title: "å½“ä½ ç´¯åˆ°æœ‰ç‚¹çƒ¦çš„æ—¶å€™ï¼Œä½ æ›´æƒ³è¦çš„æ¢å¤æ–¹å¼æ˜¯ï¼Ÿ",
        sub: "",
        options: [
          { text: "ä¸€ä¸ªäººå®‰é™å¾…ç€ï¼Œåˆ·åˆ·æ‰‹æœºæˆ–å‘å‘†ï¼Œè°éƒ½å…ˆåˆ«æ‰¾æˆ‘ã€‚", animals: ["cat", "turtle", "owl"] },
          { text: "å’Œæœ€äº²è¿‘çš„äººçªåœ¨ä¸€èµ·ï¼ŒèŠå¤©æˆ–è€…ä»€ä¹ˆéƒ½ä¸åšã€‚", animals: ["dolphin", "penguin", "rabbit"] },
          { text: "å‡ºå»èµ°èµ°ã€åƒç‚¹å¥½åƒçš„ã€é€›é€›è¡—ï¼Œæ¢ä¸ªç¯å¢ƒã€‚", animals: ["butterfly", "horse", "fox"] },
          { text: "å¹²è„†æŠ•å…¥åˆ°ä¸€ä»¶è¦åšçš„äº‹æƒ…é‡Œï¼ŒæŠŠæ³¨æ„åŠ›æŒªèµ°ã€‚", animals: ["beaver", "tiger", "wolf"] }
        ]
      },
      {
        title: "é‡åˆ°åˆ«äººæƒ…ç»ªä½è½æ¥æ‰¾ä½ å€¾è¯‰æ—¶ï¼Œä½ é€šå¸¸ä¼šï¼Ÿ",
        sub: "",
        options: [
          { text: "ç«‹åˆ»å¸® Ta åˆ†æé—®é¢˜ã€æƒ³è§£å†³åŠæ³•ã€‚", animals: ["owl", "lion", "beaver"] },
          { text: "å…ˆè®¤çœŸå¬å®Œï¼Œå®‰æ…°å’Œå…±æƒ…æ”¾åœ¨ç¬¬ä¸€ä½ã€‚", animals: ["dolphin", "cat", "penguin"] },
          { text: "ç”¨è½»æ¾çš„æ–¹å¼å’Œä¸€ç‚¹ç‚¹ç©ç¬‘å¸® Ta ç¼“å’Œæ°”æ°›ã€‚", animals: ["fox", "golden", "butterfly"] },
          { text: "ä¼šæœ‰ç‚¹æ‰‹è¶³æ— æªï¼Œä½†ä¼šé»˜é»˜é™ªåœ¨èº«è¾¹ã€‚", animals: ["deer", "rabbit", "hedgehog"] }
        ]
      },
      {
        title: "ä¸´è¿‘ä¸€ä¸ªé‡è¦ ddl / è€ƒè¯• / é¡¹ç›®æ”¶å°¾ï¼Œä½ çš„ä¹ æƒ¯æ˜¯ï¼Ÿ",
        sub: "",
        options: [
          { text: "æ—©æ—©è§„åˆ’ï¼ŒæŒ‰è®¡åˆ’ç¨³ç¨³æ¨è¿›ï¼Œå°½é‡ä¸ä¸´æ—¶æŠ±ä½›è„šã€‚", animals: ["beaver", "owl", "turtle"] },
          { text: "å‰æœŸæ‹–ç€ï¼Œåˆ°æœ€åå‡ å¤©çŒ›å†²ä¸€æ³¢ã€‚", animals: ["tiger", "horse", "fox"] },
          { text: "çœ‹å‘¨å›´äººç´§å¼ æˆ‘ä¹Ÿä¼šç´§å¼ ï¼Œä½†ä¼šè¾¹ç„¦è™‘è¾¹æ…¢æ…¢åšã€‚", animals: ["cat", "deer", "hedgehog"] },
          { text: "å¦‚æœæœ‰äººä¸€èµ·åšä¼šåŠ¨åŠ›æ›´å¼ºï¼Œä¸€ä¸ªäººå®¹æ˜“åˆ†å¿ƒã€‚", animals: ["golden", "penguin", "wolf"] }
        ]
      },
      {
        title: "åœ¨äº²å¯†å…³ç³»æˆ–å¾ˆå¥½çš„æœ‹å‹é¢å‰ï¼Œä½ æ›´åƒï¼Ÿ",
        sub: "",
        options: [
          { text: "å°å¤ªé˜³å‹ï¼Œå–œæ¬¢ä¸»åŠ¨è¡¨è¾¾çˆ±ã€ç»™å¯¹æ–¹é¼“åŠ±å’Œæ”¯æŒã€‚", animals: ["golden", "dolphin", "penguin"] },
          { text: "æ…¢çƒ­å‹ï¼Œç†Ÿäº†ä¹‹åä¼šå¾ˆé»äººï¼Œä½†å¤–äººçœ‹ä¸å¤ªå‡ºæ¥ã€‚", animals: ["cat", "hedgehog", "deer"] },
          { text: "è¡ŒåŠ¨æ´¾ï¼Œæ›´å¤šæ˜¯ç”¨åšäº‹ã€å¸®å¿™è§£å†³é—®é¢˜è¡¨è¾¾åœ¨ä¹ã€‚", animals: ["beaver", "lion", "tiger"] },
          { text: "è‡ªç”±é£ï¼Œæ—¢åœ¨ä¹å¯¹æ–¹ï¼Œåˆå¾ˆçœ‹é‡å½¼æ­¤çš„ç©ºé—´æ„Ÿã€‚", animals: ["horse", "butterfly", "wolf"] }
        ]
      },
      {
        title: "å½“å›¢é˜Ÿé‡Œå‡ºç°åˆ†æ­§å’Œäº‰åµï¼Œä½ æ›´å¯èƒ½ï¼Ÿ",
        sub: "",
        options: [
          { text: "è¯•ç€ç«™å‡ºæ¥åè°ƒï¼Œè¯´æœå¤§å®¶åä¸‹æ¥å¥½å¥½èŠã€‚", animals: ["lion", "golden", "dolphin"] },
          { text: "å°½é‡å½“å’Œäº‹ä½¬ï¼Œè®©æ°”æ°›åˆ«å¤ªå°´å°¬ã€‚", animals: ["fox", "penguin", "rabbit"] },
          { text: "ä¸å¤ªæƒ³å‚ä¸å…¶ä¸­ï¼Œæ›´æƒ³å®‰é™åœ°å…ˆæ—è§‚ã€‚", animals: ["cat", "turtle", "deer"] },
          { text: "åšæŒè‡ªå·±è®¤ä¸ºå¯¹çš„ï¼Œå¦‚æœå¾ˆå…³é”®ä¼šæ®ç†åŠ›äº‰ã€‚", animals: ["wolf", "tiger", "beaver"] }
        ]
      },
      {
        title: "å¯¹ä½ æ¥è¯´ï¼Œä»€ä¹ˆæœ€å®¹æ˜“è®©ä½ æ„Ÿè§‰ã€Œå¾ˆæœ‰æ„ä¹‰ã€ï¼Ÿ",
        sub: "",
        options: [
          { text: "çœ‹åˆ°è‡ªå·±å®Œæˆäº†ä¸€ä»¶æœ¬æ¥è§‰å¾—å¾ˆéš¾çš„äº‹ã€‚", animals: ["tiger", "beaver", "lion"] },
          { text: "é™ªä¼´å’Œæ²»æ„ˆåˆ°èº«è¾¹é‡è¦çš„äººã€‚", animals: ["dolphin", "golden", "penguin"] },
          { text: "ä¸€æ­¥æ­¥é è¿‘è‡ªå·±å–œæ¬¢çš„ç”Ÿæ´»æ–¹å¼ã€‚", animals: ["horse", "butterfly", "owl"] },
          { text: "å“ªæ€•æ˜¯å°äº‹ï¼Œä½†æœ‰äººè®¤çœŸåœ°æ¥ä½æˆ‘çš„å¿ƒæ„ã€‚", animals: ["cat", "rabbit", "hedgehog"] }
        ]
      },
      {
        title: "å¦‚æœç”¨ä¸€ç§çŠ¶æ€å½¢å®¹ä½ ç†æƒ³çš„ä¸€å¤©ï¼Œä½ æ›´æ¥è¿‘ï¼Ÿ",
        sub: "",
        options: [
          { text: "æ—©èµ·æ•ˆç‡ä¸é”™ï¼ŒæŠŠè®¡åˆ’å†…çš„äº‹éƒ½è¸å®åšåˆ°ã€‚", animals: ["beaver", "turtle", "owl"] },
          { text: "æœ‰å›ºå®šçš„å·¥ä½œ / å­¦ä¹ æ—¶é—´ï¼Œä¹Ÿæœ‰å’Œå–œæ¬¢çš„äººç›¸å¤„ã€‚", animals: ["golden", "penguin", "wolf"] },
          { text: "ç™½å¤©æ¯”è¾ƒè‡ªç”±ï¼Œéšæ—¶å¯ä»¥å†³å®šå»å“ªé‡Œã€åšä»€ä¹ˆã€‚", animals: ["horse", "butterfly", "fox"] },
          { text: "èŠ‚å¥ä¸ä¸€å®šé«˜æ•ˆï¼Œä½†æ•´ä½“æ˜¯è½»æ¾ã€èˆ’æœã€ä¸ç„¦è™‘çš„ã€‚", animals: ["cat", "rabbit", "dolphin"] }
        ]
      }
      // ğŸ‘‰ æƒ³ç»§ç»­åŠ é¢˜ç›®ï¼Œå°±åœ¨è¿™é‡Œå¾€åè¿½åŠ  { title, sub, options } ç»“æ„å³å¯
    ];

    // çŠ¶æ€
    let currentIndex = 0;
    let answers = new Array(questions.length).fill(null);
    let scores = {};

    function resetScores() {
      scores = {};
      Object.keys(animalDefs).forEach(k => scores[k] = 0);
    }
    resetScores();

    // DOM
    const startCard   = document.getElementById("startCard");
    const quizCard    = document.getElementById("quizCard");
    const resultCard  = document.getElementById("resultCard");
    const loadingCard = document.getElementById("loadingCard");

    const questionTitle   = document.getElementById("questionTitle");
    const questionSub     = document.getElementById("questionSub");
    const optionsContainer= document.getElementById("optionsContainer");
    const progressText    = document.getElementById("progressText");
    const progressPercent = document.getElementById("progressPercent");
    const progressInner   = document.getElementById("progressInner");

    const resultAnimal = document.getElementById("resultAnimal");
    const resultLine   = document.getElementById("resultLine");
    const mainText     = document.getElementById("mainText");
    const secondText   = document.getElementById("secondText");
    const adviceText   = document.getElementById("adviceText");
    const scoreContainer = document.getElementById("scoreContainer");

    // æ˜¾ç¤ºé¢˜ç›®
    function showQuestion() {
      const q = questions[currentIndex];
      questionTitle.textContent = q.title;
      questionSub.textContent   = q.sub || "";

      const total = questions.length;
      progressText.textContent = `ç¬¬ ${currentIndex + 1} é¢˜ / å…± ${total} é¢˜`;
      const percent = Math.round((currentIndex / total) * 100);
      progressPercent.textContent = percent + "%";
      progressInner.style.width   = percent + "%";

      optionsContainer.innerHTML = "";
      q.options.forEach((opt, idx) => {
        const div = document.createElement("div");
        div.className = "opt";
        div.dataset.index = idx;

        const optMain = document.createElement("div");
        optMain.className = "opt-main";
        const textSpan = document.createElement("span");
        textSpan.textContent = opt.text;
        optMain.appendChild(textSpan);
        div.appendChild(optMain);

        if (answers[currentIndex] === idx) {
          div.classList.add("selected");
        }

        div.addEventListener("click", () => {
          answers[currentIndex] = idx;
          optionsContainer.querySelectorAll(".opt").forEach(o => o.classList.remove("selected"));
          div.classList.add("selected");
        });

        optionsContainer.appendChild(div);
      });

      const nextBtn = document.getElementById("nextBtn");
      nextBtn.textContent = currentIndex === total - 1 ? "æŸ¥çœ‹ç»“æœ" : "ä¸‹ä¸€é¢˜";
    }

    // è®¡ç®—åˆ†æ•°
    function calculateScores() {
      resetScores();
      questions.forEach((q, qi) => {
        const ansIndex = answers[qi];
        if (ansIndex == null) return;
        const opt = q.options[ansIndex];
        (opt.animals || []).forEach(key => {
          if (scores[key] != null) scores[key] += 1;
        });
      });
    }

    // å±•ç¤ºç»“æœ
    function showResult() {
      calculateScores();
      const sorted = Object.entries(scores)
        .filter(([, v]) => v > 0)
        .sort((a, b) => b[1] - a[1]);

      if (sorted.length === 0) {
        resultAnimal.textContent = "æš‚æ—¶çœ‹ä¸å‡ºæ˜æ˜¾çš„åŠ¨ç‰©å€¾å‘";
        resultLine.textContent   = "å¯ä»¥å°è¯•åœ¨ä¸åŒçŠ¶æ€ä¸‹å†æµ‹ä¸€æ¬¡ï¼Œæˆ–æ›´è´´è¿‘çœŸå®æ„Ÿå—åœ°ä½œç­”ã€‚";
        mainText.textContent     = "";
        secondText.textContent   = "";
        adviceText.textContent   = "ä½ ä¸éœ€è¦è¢«ä»»ä½•æµ‹è¯•å®šä¹‰ï¼Œè¿™åªæ˜¯ä¸€ä¸ªç”¨æ¥ç©è€å’Œè‡ªæˆ‘è§‚å¯Ÿçš„å°å·¥å…·ã€‚";
        scoreContainer.innerHTML = "";
        return;
      }

      const [topKey, topScore] = sorted[0];
      const mainDef = animalDefs[topKey];
      let secondDef = null;

      if (sorted.length > 1) {
        const [secKey, secScore] = sorted[1];
        if (secScore > 0) secondDef = animalDefs[secKey];
      }

      resultAnimal.textContent = `${mainDef.icon} ${mainDef.name}`;
      resultLine.textContent   = mainDef.brief;

      mainText.textContent =
        `Â· ä½ èº«ä¸Šè¿™ç±»åŠ¨ç‰©çš„ç‰¹è´¨æ¯”è¾ƒæ˜æ˜¾ï¼Œåœ¨å¾ˆå¤šåœºæ™¯ä¸‹éƒ½ä¼šä¸è‡ªè§‰åœ°è¿™æ ·ååº”ã€‚\n` +
        `Â· åˆ«äººç¬¬ä¸€æ¬¡æ¥è§¦ä½ æ—¶ï¼Œå¾ˆå¯èƒ½ä¼šå…ˆæ„Ÿå—åˆ°è¿™ä¸€é¢ã€‚\n` +
        `Â· è¿™æ—¢æ˜¯ä½ çš„ç¨³å®šä¼˜åŠ¿ï¼Œä¹Ÿæ˜¯ä½ åœ¨å‹åŠ›ä¸‹æœ€å¸¸ç”¨çš„ã€Œé»˜è®¤æ¨¡å¼ã€ã€‚`;

      if (secondDef) {
        secondText.textContent =
          `Â· ä½ çš„æ€§æ ¼é‡Œè¿˜æœ‰ä¸€åªã€Œ${secondDef.name}ã€ï¼Œåœ¨ç‰¹å®šæƒ…å¢ƒä¸‹ä¼šè¢«æ¿€æ´»ã€‚\n` +
          `Â· æœ‰æ—¶å€™ä½ ä¼šæ›´åƒ ${mainDef.name}ï¼Œæœ‰æ—¶å€™åˆç‰¹åˆ«åƒ ${secondDef.name}ã€‚\n` +
          `Â· å…è®¸è‡ªå·±æ˜¯ä¸€ä¸ªæœ‰å±‚æ¬¡çš„äººï¼Œä¼šè®©ä½ æ›´è‡ªåœ¨ã€‚`;

        adviceText.textContent =
          `æ¥è‡ª ${mainDef.icon} çš„æé†’ï¼š${mainDef.advice}\n\n` +
          `æ¥è‡ª ${secondDef.icon} çš„æé†’ï¼š${secondDef.advice}`;
      } else {
        secondText.textContent =
          "ç›®å‰æ²¡æœ‰ç‰¹åˆ«çªå‡ºçš„ç¬¬äºŒç±»å‹ï¼Œè¯´æ˜ä½ çš„ä¸»å¯¼åŠ¨ç‰©åŸå‹æ¯”è¾ƒé›†ä¸­ã€æ¯”è¾ƒæ˜ç¡®ã€‚";
        adviceText.textContent =
          `æ¥è‡ª ${mainDef.icon} çš„æé†’ï¼š${mainDef.advice}\n\n` +
          "ä½ å¯ä»¥åœ¨ä¸åŒå¿ƒæƒ…ã€ä¸åŒé˜¶æ®µå†ç©å‡ æ¬¡ï¼Œçœ‹çœ‹ä¼šä¸ä¼šè·³å‡ºä¸ä¸€æ ·çš„å°åŠ¨ç‰©ã€‚";
      }

      // åˆ†æ•°æ¡ï¼šå±•ç¤ºå‰ 4 å
      scoreContainer.innerHTML = "";
      const topN = sorted.slice(0, 4);
      const maxScore = topN[0][1] || 1;

      topN.forEach(([key, value]) => {
        const def = animalDefs[key];
        const row = document.createElement("div");
        row.className = "score-row";

        const label = document.createElement("div");
        label.className = "score-label";
        label.innerHTML = `<span>${def.icon} ${def.name}</span><span>${value} åˆ†</span>`;

        const bar = document.createElement("div");
        bar.className = "score-bar";
        const inner = document.createElement("div");
        inner.className = "score-inner";
        inner.style.width = Math.round((value / maxScore) * 100) + "%";
        bar.appendChild(inner);

        row.appendChild(label);
        row.appendChild(bar);
        scoreContainer.appendChild(row);
      });
    }

    // äº‹ä»¶ç»‘å®š
    document.getElementById("startBtn").addEventListener("click", () => {
      startCard.style.display   = "none";
      resultCard.style.display  = "none";
      loadingCard.style.display = "none";
      quizCard.style.display    = "block";

      currentIndex = 0;
      answers = new Array(questions.length).fill(null);
      resetScores();
      showQuestion();
    });

    document.getElementById("prevBtn").addEventListener("click", () => {
      if (currentIndex === 0) return;
      currentIndex -= 1;
      showQuestion();
    });

    document.getElementById("nextBtn").addEventListener("click", () => {
      if (answers[currentIndex] == null) {
        alert("å…ˆé€‰ä¸€ä¸ªæœ€æ¥è¿‘ä½ çš„é€‰é¡¹å“¦ï½");
        return;
      }
      const lastIndex = questions.length - 1;
      if (currentIndex < lastIndex) {
        currentIndex += 1;
        showQuestion();
      } else {
        quizCard.style.display    = "none";
        loadingCard.style.display = "block";
        setTimeout(() => {
          loadingCard.style.display = "none";
          resultCard.style.display  = "block";
          showResult();
        }, 800);
      }
    });

    document.getElementById("restartBtn").addEventListener("click", () => {
      resultCard.style.display  = "none";
      startCard.style.display   = "block";
    });
  </script>
</body>
</html>
